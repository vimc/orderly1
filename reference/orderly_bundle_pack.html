<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Pack and run orderly "bundles" — orderly_bundle_pack • orderly1</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Pack and run orderly " bundles orderly_bundle_pack><meta name="description" content="Pack up and run orderly reports to run elsewhere. By using these
functions you can safely copy all requirements of an orderly
report into a portable archive and run them on another machine
(perhaps a cluster or HPC), then import the completed archive into
your orderly tree. There is considerable overhead to using these
functions (mostly due to transport costs) so they are intended
primarily for very computationally demanding patterns."><meta property="og:description" content="Pack up and run orderly reports to run elsewhere. By using these
functions you can safely copy all requirements of an orderly
report into a portable archive and run them on another machine
(perhaps a cluster or HPC), then import the completed archive into
your orderly tree. There is considerable overhead to using these
functions (mostly due to transport costs) so they are intended
primarily for very computationally demanding patterns."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">orderly1</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/bundles.html">orderly bundles</a></li>
    <li><a class="dropdown-item" href="../articles/changelog.html">orderly changelog</a></li>
    <li><a class="dropdown-item" href="../articles/orderly.html">orderly</a></li>
    <li><a class="dropdown-item" href="../articles/patterns.html">orderly patterns</a></li>
    <li><a class="dropdown-item" href="../articles/remote.html">orderly remotes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/vimc/orderly/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Pack and run orderly "bundles"</h1>
      <small class="dont-index">Source: <a href="https://github.com/vimc/orderly/blob/main/R/bundle.R" class="external-link"><code>R/bundle.R</code></a></small>
      <div class="d-none name"><code>orderly_bundle_pack.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Pack up and run orderly reports to run elsewhere. By using these
functions you can safely copy all requirements of an orderly
report into a portable archive and run them on another machine
(perhaps a cluster or HPC), then import the completed archive into
your orderly tree. There is considerable overhead to using these
functions (mostly due to transport costs) so they are intended
primarily for very computationally demanding patterns.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">orderly_bundle_pack</span><span class="op">(</span></span>
<span>  <span class="va">path</span>,</span>
<span>  <span class="va">name</span>,</span>
<span>  parameters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  envir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  root <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  locate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  message <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  instance <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  remote <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tags <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">orderly_bundle_run</span><span class="op">(</span><span class="va">path</span>, workdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span>, echo <span class="op">=</span> <span class="cn">TRUE</span>, envir <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">orderly_bundle_import</span><span class="op">(</span><span class="va">path</span>, root <span class="op">=</span> <span class="cn">NULL</span>, locate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">orderly_bundle_list</span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>A path, whose interpretation depends on the function:</p>
<p><code>orderly_bundle_pack</code>: A directory to save bundles to.  If
it does not exist it will be created for you.</p>
<p><code>orderly_bundle_run</code>: The path to the packed bundle (a zip
file created by <code>orderly_bundle_pack</code>)</p>
<p><code>orderly_bundle_import</code>: The path to unpack and import
(a zip file created by <code>orderly_bundle_run</code>)</p>
<p><code>orderly_bundle_list</code>: The path to a directory that might
contain either incomplete or complete bundles (created by either
<code>orderly_bundle_pack</code> or <code>orderly_bundle_run</code>)</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>Name of the report to pack (see
<code><a href="orderly_list.html">orderly_list()</a></code>.  A leading <code>src/</code> will be removed if
provided, allowing easier use of autocomplete.</p></dd>


<dt id="arg-parameters">parameters<a class="anchor" aria-label="anchor" href="#arg-parameters"></a></dt>
<dd><p>Parameters passed to the report. A named list of
parameters declared in the <code>orderly.yml</code>.  Each parameter
must be a scalar character, numeric, integer or logical.</p></dd>


<dt id="arg-envir">envir<a class="anchor" aria-label="anchor" href="#arg-envir"></a></dt>
<dd><p>The parent of the environment that will be used to
evaluate the report script; by default a new environment will be
made with the global environment as the parent.</p></dd>


<dt id="arg-root">root<a class="anchor" aria-label="anchor" href="#arg-root"></a></dt>
<dd><p>The path to an orderly root directory, or <code>NULL</code>
(the default) to search for one from the current working
directory if <code>locate</code> is <code>TRUE</code>.</p></dd>


<dt id="arg-locate">locate<a class="anchor" aria-label="anchor" href="#arg-locate"></a></dt>
<dd><p>Logical, indicating if the configuration should be
searched for.  If <code>TRUE</code> and <code>config</code> is not given,
then orderly looks in the working directory and up through its
parents until it finds an <code>orderly_config.yml</code> file.</p></dd>


<dt id="arg-message">message<a class="anchor" aria-label="anchor" href="#arg-message"></a></dt>
<dd><p>An optional character string containing a message
explaining why the report was run</p></dd>


<dt id="arg-instance">instance<a class="anchor" aria-label="anchor" href="#arg-instance"></a></dt>
<dd><p>Select instance of the source database to be used,
where multiple instances are configured.  Use a single
<em>unnamed</em> character string to indicate an instance to
match.  If given, then this name must be present in all
databases where instances are listed in
<code>orderly_config.yml</code>, and will be ignored by all database
where instances are not given.  See the "orderly" vignette for
further information.</p></dd>


<dt id="arg-remote">remote<a class="anchor" aria-label="anchor" href="#arg-remote"></a></dt>
<dd><p>Remote to use to resolve dependencies.  Use this in
order to run a report with the same dependencies as are
available on a remote server, particularly when using <code>id = "latest"</code>.  Note that this is not the same as running
<code><a href="orderly_pull_dependencies.html">orderly_pull_dependencies()</a></code>, then <code>orderly_run</code>
with <code>remote = NULL</code>, as the pull/run approach will use the
latest report in <em>your</em> archive but the <code>remote = "remote"</code> approach will use the latest approach in the
<em>remote</em> archive (which might be less recent).</p></dd>


<dt id="arg-tags">tags<a class="anchor" aria-label="anchor" href="#arg-tags"></a></dt>
<dd><p>Character vector of tags to add to the report.  Tags
are immutable and cannot be removed once the report is run.
Tags added here will be <em>in addition</em> to any tags listed in
the <code>tags:</code> field in <code>orderly.yml</code> and must be present
in <code>orderly_config.yml</code>.</p></dd>


<dt id="arg-workdir">workdir<a class="anchor" aria-label="anchor" href="#arg-workdir"></a></dt>
<dd><p>The path in which to run bundles.  If it does not
exist it will be created for you.  The completed bundle will be
saved in this directory as <code>&lt;id&gt;.zip</code>.</p></dd>


<dt id="arg-echo">echo<a class="anchor" aria-label="anchor" href="#arg-echo"></a></dt>
<dd><p>Print the result of running the R code to the console</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>For <code>orderly_bundle_pack</code> and
<code>orderly_bundle_run</code>, a list with elements <code>path</code> (the
path to the bundle) and <code>id</code> (its orderly id).  For
<code>orderly_bundle_list</code> a data.frame with key information
about the report in the bundles (id, name, parameters, status,
time).  The function <code>orderly_bundle_import</code> is called for
its side effect only and does not return anything useful.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">orderly1</span><span class="fu">::</span><span class="fu"><a href="orderly_example.html">orderly_example</a></span><span class="op">(</span><span class="st">"minimal"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A working directory to export bundles to:</span></span></span>
<span class="r-in"><span><span class="va">workdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Pack up the "example" report to go:</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">orderly1</span><span class="fu">::</span><span class="fu">orderly_bundle_pack</span><span class="op">(</span><span class="va">workdir</span>, <span class="st">"example"</span>, root <span class="op">=</span> <span class="va">path</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [ <span style="color: #5FAFD7; font-weight: bold;">name      </span> ]  example</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [ <span style="color: #5FAFD7; font-weight: bold;">id        </span> ]  20250731-134541-2b3e6451</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [ <span style="color: #5FAFD7; font-weight: bold;">start     </span> ]  2025-07-31 13:45:41.171261</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [ <span style="color: #5FAFD7; font-weight: bold;">data      </span> ]  source =&gt; dat: 20 x 2</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [ <span style="color: #5FAFD7; font-weight: bold;">bundle pack</span> ]  20250731-134541-2b3e6451</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The return value is a list with the id and the path to the zip</span></span></span>
<span class="r-in"><span><span class="co"># file created:</span></span></span>
<span class="r-in"><span><span class="va">res</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "20250731-134541-2b3e6451"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $path</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/Rtmp82yBdj/file1cbfa222d3/20250731-134541-2b3e6451.zip"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A list of reports bundled in this directory and their status</span></span></span>
<span class="r-in"><span><span class="fu">orderly1</span><span class="fu">::</span><span class="fu">orderly_bundle_list</span><span class="op">(</span><span class="va">workdir</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         id    name parameters     status                time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 20250731-134541-2b3e6451 example            incomplete 2025-07-31 13:45:41</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run the bundle (this would ordinarily be done on another computer)</span></span></span>
<span class="r-in"><span><span class="va">zip</span> <span class="op">&lt;-</span> <span class="fu">orderly1</span><span class="fu">::</span><span class="fu">orderly_bundle_run</span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">path</span>, <span class="va">workdir</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [ <span style="color: #5FAFD7; font-weight: bold;">start     </span> ]  2025-07-31 13:45:41.215845</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; png("mygraph.png")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; par(mar = c(15, 4, 0.5, 0.5))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; barplot(setNames(dat$number, dat$name), las = 2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; dev.off()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> agg_record_2034683990 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     2 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [ <span style="color: #5FAFD7; font-weight: bold;">end       </span> ]  2025-07-31 13:45:41.2303</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [ <span style="color: #5FAFD7; font-weight: bold;">elapsed   </span> ]  Ran report in 0.01445508 secs</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [ <span style="color: #5FAFD7; font-weight: bold;">artefact  </span> ]  mygraph.png: a7b94ccda59d3cdc6de2c3b088822f33</span>
<span class="r-in"><span><span class="va">zip</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "20250731-134541-2b3e6451"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $path</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/Rtmp82yBdj/file1cbfa222d3/20250731-134541-2b3e6451.zip"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $filename</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "20250731-134541-2b3e6451.zip"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The status has now been updated to reflect the status</span></span></span>
<span class="r-in"><span><span class="fu">orderly1</span><span class="fu">::</span><span class="fu">orderly_bundle_list</span><span class="op">(</span><span class="va">workdir</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         id    name parameters   status                time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 20250731-134541-2b3e6451 example            complete 2025-07-31 13:45:41</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We can import this into the orderly tree</span></span></span>
<span class="r-in"><span><span class="fu">orderly1</span><span class="fu">::</span><span class="fu">orderly_bundle_import</span><span class="op">(</span><span class="va">zip</span><span class="op">$</span><span class="va">path</span>, root <span class="op">=</span> <span class="va">path</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [ <span style="color: #5FAFD7; font-weight: bold;">import    </span> ]  example:20250731-134541-2b3e6451</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This has now been included in your orderly archive and the</span></span></span>
<span class="r-in"><span><span class="co"># workdir can be safely deleted</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">workdir</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">orderly1</span><span class="fu">::</span><span class="fu"><a href="orderly_list_drafts.html">orderly_list_archive</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      name                       id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 example 20250731-134541-2b3e6451</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn, Robert Ashton, Alex Hill, Martin Eden, Wes Hinsley, Emma Russell, James Thompson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

